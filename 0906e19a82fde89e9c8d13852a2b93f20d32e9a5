{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a90c16a3_b618d995",
        "filename": "redfishhostinterface.cpp",
        "patchSetId": 12
      },
      "lineNbr": 621,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-09-29T23:50:31Z",
      "side": 1,
      "message": "I did some testing today on an AST2600 EVB and this function is consistently taking \u003e 500ms, which makes the SSIF driver abort the command.  I captured these timestamps with busctl:\n\n```\n6.691       start\n6.696 :+005 get bootstrapping enabled\n6.697 :+001 return\n6.700 :+003 mapper subtree paths\n6.704 :+004 return\n6.706 :+002 get managed objects\n6.707 :+001 return\n6.727 :+020 create user\n6.819 :+092 return\n6.951 :+132 get role id\n6.953 :+002 return\n6.956 :+003 set user priv\n7.056 :+100 return\n7.142 :+086 set bootstrap account\n7.150 :+008 return\n7.191 :+041 set user enabled\n7.228 :+037 return\n7.269 :+041 end\n```\n\nThere is a 132ms gap between creating the user and getting the role id, which seems to be where we generate the password.\n\nAlso setting the user attributes takes a bit:\n100 + 8 + 37 \u003d 145ms",
      "revId": "0906e19a82fde89e9c8d13852a2b93f20d32e9a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0de55d3f_987d7e04",
        "filename": "redfishhostinterface.cpp",
        "patchSetId": 12
      },
      "lineNbr": 621,
      "author": {
        "id": 1000945
      },
      "writtenOn": "2025-09-30T08:02:06Z",
      "side": 1,
      "message": "Can I asked why the SSIF driver abort the command when it take more than 500ms?",
      "parentUuid": "a90c16a3_b618d995",
      "revId": "0906e19a82fde89e9c8d13852a2b93f20d32e9a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7965b743_96088b3f",
        "filename": "redfishhostinterface.cpp",
        "patchSetId": 12
      },
      "lineNbr": 621,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-09-30T11:05:49Z",
      "side": 1,
      "message": "There is this comment in the driver:\n\n```\n/*\n * IPMI 2.0 Spec, section 12.7 SSIF Timing,\n * Request-to-Response Time is T6max(250ms) - T1max(20ms) - 3ms \u003d 227ms\n * Recover ssif_bmc from busy state if it takes up to 500ms\n */\n#define RESPONSE_TIMEOUT                        500 /* ms */\n```",
      "parentUuid": "0de55d3f_987d7e04",
      "revId": "0906e19a82fde89e9c8d13852a2b93f20d32e9a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "48f07433_9759eb60",
        "filename": "redfishhostinterface.cpp",
        "patchSetId": 12
      },
      "lineNbr": 621,
      "author": {
        "id": 1000945
      },
      "writtenOn": "2025-09-30T23:23:33Z",
      "side": 1,
      "message": "Can you check if bypass the creating password steps (hard code the password) helps improve the time out?\nI implemented code following the Redfish host interface spec, the spec does not mention which interface can use this interface and how to deal with the time out in creating the user name and passwords.\nThere is no guarantee that all the message in SSIF interface can finish in 500ms. What happens when BMC is busy and can\u0027t response the message in 500ms? What happens in BMCLess?\n\nIf you have any idea in improving the creating passwords and user time, feel free to propose but as my opinion we should not compromise the security just because the SSIF has 500ms time out.",
      "parentUuid": "7965b743_96088b3f",
      "revId": "0906e19a82fde89e9c8d13852a2b93f20d32e9a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8d62e6a_8190ae31",
        "filename": "redfishhostinterface.cpp",
        "patchSetId": 12
      },
      "lineNbr": 621,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-10-01T12:10:51Z",
      "side": 1,
      "message": "\u003e Can you check if bypass\n\nThat was the first thing I tried and it doesn\u0027t make any difference.\n\n\u003e There is no guarantee that all the message in SSIF interface can finish in 500ms.\n\nI agree.  I suppose if the command could be processed with the bmc under no/light load, we could respond with a busy response when under heavy load so the host retries.  but we can\u0027t even respond in time with no load, so that doesn\u0027t really help.\n\n\u003e What happens in BMCLess?\n\nI don\u0027t understand.  If there is no bmc, the host side ssif driver isn\u0027t even going to load so we won\u0027t be doing ssif.\n\n\u003e If you have any idea in improving the creating passwords and user time\n\nThe only thing I could come up with is some kind of super-optimized user mgr interface.  We are making a lot of dbus calls back and forth to the user manager - I suspect we could shave off a fair amount of time there.  But that seems like a bigger problem with the user manager.\n\nSo Quan@Ampere wrote the bmc ssif driver and the 500ms timeout.  Do they still work at Ampere?  Maybe you could chat with them about it.   I patched my kernel to 1s and the command work fine.\n\n@vernon.mauery@gmail.com I\u0027d be curious to get your take on this if you have time, thanks.",
      "parentUuid": "48f07433_9759eb60",
      "revId": "0906e19a82fde89e9c8d13852a2b93f20d32e9a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2aebb85b_e4280606",
        "filename": "redfishhostinterface.cpp",
        "patchSetId": 12
      },
      "lineNbr": 621,
      "author": {
        "id": 1000163
      },
      "writtenOn": "2025-10-02T23:48:24Z",
      "side": 1,
      "message": "I think that the 500ms timeout seems very short. Depending on what else the BMC is doing at the time, it might not take much to have any IPMI command timeout, much less one that is involved, like creating a user.\n\nI am also not opposed to optimizing the user management interface. It seems like we should be able to just provide all the details we want for the user in one go. I am not sure what the bottlenecks are in actually creating the user, but a second is a long time to wait and that should be addressed.",
      "parentUuid": "c8d62e6a_8190ae31",
      "revId": "0906e19a82fde89e9c8d13852a2b93f20d32e9a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e78d6065_e5e5878d",
        "filename": "redfishhostinterface.cpp",
        "patchSetId": 12
      },
      "lineNbr": 621,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2025-10-03T14:35:33Z",
      "side": 1,
      "message": "Thanks @vernon.mauery@gmail.com.  The 500ms is 2x a number from the IPMI spec itself in the SSIF section, so I wasn\u0027t sure if increasing that timeout was reasonable or if IPMI implementations have just gotten slower over the years and the spec is out of touch.",
      "parentUuid": "2aebb85b_e4280606",
      "revId": "0906e19a82fde89e9c8d13852a2b93f20d32e9a5",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}
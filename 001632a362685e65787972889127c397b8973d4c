{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b1e74538_e00adad0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-01-27T14:44:25Z",
      "side": 1,
      "message": "My take on this is each platform has different naming convention for their version string, it should be driven by a platform specific config file where each platform owner gets to decide the minor, major etc instead of massaging the version string.",
      "revId": "001632a362685e65787972889127c397b8973d4c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d98b3c2e_99ad15d2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-01-27T15:41:59Z",
      "side": 1,
      "message": "How do you propose we accomplish that?\n\nThe _current_ code is broken by the way we currently tag openbmc/openbmc. I think this proposal both fixes that AND allows platform owners to customize (by providing their own regex).",
      "parentUuid": "b1e74538_e00adad0",
      "revId": "001632a362685e65787972889127c397b8973d4c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8e6b3c62_7adb2095",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-01-31T17:07:07Z",
      "side": 1,
      "message": "We can process the release version string(VERSION in os-release) in a meta-xxx layerand update the dev_id.json to include major/minor also is a possibility. (https://github.com/openbmc/phosphor-host-ipmid/blob/master/apphandler.cpp#L635). \n\nI am okie, if we offer both flavors like a regex choice(one less system config JSON) and a system config JSON.",
      "parentUuid": "d98b3c2e_99ad15d2",
      "revId": "001632a362685e65787972889127c397b8973d4c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ad253f33_a9ce57cf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-02-08T03:38:24Z",
      "side": 1,
      "message": "I don\u0027t really understand how putting the version in dev_id.json is helpful for most people.  Aren\u0027t they going to want to tag a release and have the tag be somewhat represented in the IPMI version?  I don\u0027t think adding manual update requirements is a great direction.\n\n@Tom, @Vernon,\n\nWhat does Potin need to do to make progress on this, or is it a dead-end?  I\u0027m not sure I have a good understanding.\n\nAs far as I can tell the current code is broken for how we tag openbmc/openbmc.  It seems like at a minimum we should fix that.  If it is done with regex or some other way, I think you two as maintainers can decide, but we need some direction of what you want.",
      "parentUuid": "8e6b3c62_7adb2095",
      "revId": "001632a362685e65787972889127c397b8973d4c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "28295b13_c3718f75",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-02-08T06:01:45Z",
      "side": 1,
      "message": "\u003e Aren\u0027t they going to want to tag a release and have the tag be somewhat represented in the IPMI version? I don\u0027t think adding manual update requirements is a great direction.\n\nYes, tag a release and then parse it while building the image and generate the dev_id.json, which will be consumed by ipmid app. I am fine with the regex as another option, don\u0027t want to hold this patch which fixes the broken version. I will catch on the other thread, where Potin is looking for a suggestion.",
      "parentUuid": "ad253f33_a9ce57cf",
      "revId": "001632a362685e65787972889127c397b8973d4c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3b6f58e6_1ab28de0",
        "filename": "apphandler.cpp",
        "patchSetId": 2
      },
      "lineNbr": 501,
      "author": {
        "id": 1000163
      },
      "writtenOn": "2023-01-27T19:19:08Z",
      "side": 1,
      "message": "Each of these makes some assumptions about the regex captures. At the very least the code should check to make sure that the match count is the expected number of matches.\n\nI like the idea of a regex, but I think we need some more work.\n\nSince the aux bytes (13:16) are just bytes, we should probably have those as separate matches and just put them together in order.\n\nSo if the matches are standardized like:\nm[0] \u003d whole match\nm[1] \u003d major\nm[2] \u003d minor\nm[3] \u003d aux[0]\nm[4] \u003d aux[1]\nm[5] \u003d aux[2]\nm[6] \u003d aux[3]\n\nThen we could put together the command response easily. The trouble would be if any of those fields were out of order from version string to match order.\n\nSo maybe we would need to have two regexs, the first to modify the string to put everything in order, and the second to pull matches out.",
      "revId": "001632a362685e65787972889127c397b8973d4c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f93e97d1_bc91fc8b",
        "filename": "apphandler.cpp",
        "patchSetId": 2
      },
      "lineNbr": 501,
      "author": {
        "id": 1001264
      },
      "writtenOn": "2023-01-30T05:26:27Z",
      "side": 1,
      "message": "Hi Vernon, Thanks for the feedback.\n\nCurrent regex is `(\\d+)\\.(\\d+)[\\.-](\\d+)(-.*)?`, m[1-3] should not be empty if matched, only m[4] is optional. I can remove the check of m[1-3] and use match count to identify m[4] is avaliable or not.\n\n\nAbout aux bytes (13:16), original method converting string into hex digits.\nSomtimes it convert 2 characters into 1 byte, sometimes just 1 characters. I am not quite understand how to add regex for each aux byte, could you explain more (or examples) about this? Thank you.\n\nex: in current method, first additional string \"123\" will covert as\naux[0] \u003d 0x01\naux[1] \u003d 0x23",
      "parentUuid": "3b6f58e6_1ab28de0",
      "revId": "001632a362685e65787972889127c397b8973d4c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4915c1e9_5e5b7d2f",
        "filename": "apphandler.cpp",
        "patchSetId": 2
      },
      "lineNbr": 501,
      "author": {
        "id": 1000005
      },
      "writtenOn": "2023-02-09T15:49:24Z",
      "side": 1,
      "message": "I will prefer a separate regex for aux bytes (which can search the remainder of finding major and minor). The aux bytes regex can be empty as well.",
      "parentUuid": "f93e97d1_bc91fc8b",
      "revId": "001632a362685e65787972889127c397b8973d4c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c16d884a_262bfaa4",
        "filename": "apphandler.cpp",
        "patchSetId": 2
      },
      "lineNbr": 501,
      "author": {
        "id": 1001264
      },
      "writtenOn": "2023-02-15T03:05:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4915c1e9_5e5b7d2f",
      "revId": "001632a362685e65787972889127c397b8973d4c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4ac13123_c48d3207",
        "filename": "apphandler.cpp",
        "patchSetId": 2
      },
      "lineNbr": 501,
      "author": {
        "id": 1000163
      },
      "writtenOn": "2023-02-15T23:11:30Z",
      "side": 1,
      "message": "I would propose something like a regex and an array of match numbers so that the matches and parts of the version string don\u0027t need to match up.\n\nv1.99.10-113-g65edf7d-r3-0-g9e4f715\nsomething like this:\nregex \u003d \"v([\\d]+)\\.([\\d]+)\\.\\([\\d]+)-([\\d]+)-g[a-f\\d]{4}\\([a-f\\d]{2})-..-([\\d]+)-g([a-f\\d]{2}).{4}([a-f\\d]{2})\"\nmatches \u003d { 1, 2, 6, 5, 4, 3 }\n\nAnd we would place the matched parts in order where the first entry of the matches array would fill major, second to minor, and third through sixth would fill the aux bytes. The only other thing I can think of that this would not respond to is what base to parse captured data (hex or decimal).",
      "parentUuid": "c16d884a_262bfaa4",
      "revId": "001632a362685e65787972889127c397b8973d4c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "62876699_966762d1",
        "filename": "apphandler.cpp",
        "patchSetId": 2
      },
      "lineNbr": 501,
      "author": {
        "id": 1001264
      },
      "writtenOn": "2023-02-16T02:54:58Z",
      "side": 1,
      "message": "Hi Vernon, thanks for the feedback.\nCould I keep this patch only for parsing Major and Minor version?\nI submitted another patch for adding aux bytes parsing, please have check there, thank you.\nhttps://gerrit.openbmc.org/c/openbmc/phosphor-host-ipmid/+/60985/3",
      "parentUuid": "4ac13123_c48d3207",
      "revId": "001632a362685e65787972889127c397b8973d4c",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}
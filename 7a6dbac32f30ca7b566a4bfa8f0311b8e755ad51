{
  "comments": [
    {
      "key": {
        "uuid": "0b8ebb39_7e8aa458",
        "filename": "dbus-sdr/sensorcommands.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1639,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2021-08-04T06:32:13Z",
      "side": 1,
      "message": "this is only called in getSensor handlers.\n\nThis will force the set handler to be dependent on the get handler. Ideally each handler shoul dbe independent of each other.\n\nI would suggest also checking the `Mutable` flag the first time in the set handler",
      "range": {
        "startLine": 1639,
        "startChar": 4,
        "endLine": 1639,
        "endChar": 76
      },
      "revId": "7a6dbac32f30ca7b566a4bfa8f0311b8e755ad51",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5891fcdc_a16f3f1b",
        "filename": "dbus-sdr/sensorcommands.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1639,
      "author": {
        "id": 1000632
      },
      "writtenOn": "2021-08-04T21:24:17Z",
      "side": 1,
      "message": "It is intentional that set sensor reading depends on getting sensor SDR IIUC. IPMI users are supposed to fetch the sensor SDR first and then optionally setting sensor value with write permission. \n\nEvery time users call ipmi getSensorSdr, the sdrWriteTable will be refreshed, as the sensor stack is dynamically collected from dbus-sensor.",
      "parentUuid": "0b8ebb39_7e8aa458",
      "range": {
        "startLine": 1639,
        "startChar": 4,
        "endLine": 1639,
        "endChar": 76
      },
      "revId": "7a6dbac32f30ca7b566a4bfa8f0311b8e755ad51",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7ea156ea_61b3ef18",
        "filename": "dbus-sdr/sensorcommands.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1639,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2021-08-04T21:52:34Z",
      "side": 1,
      "message": "Hao, do you have any comment on this?\n\nI remember that we had a discussion on this topic internally.",
      "parentUuid": "5891fcdc_a16f3f1b",
      "range": {
        "startLine": 1639,
        "startChar": 4,
        "endLine": 1639,
        "endChar": 76
      },
      "revId": "7a6dbac32f30ca7b566a4bfa8f0311b8e755ad51",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a225cbb_f7197a28",
        "filename": "dbus-sdr/sensorcommands.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1639,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-08-07T10:11:43Z",
      "side": 1,
      "message": "It is definitely a bug, that the set-handler code path doesn\u0027t initialize the SDR in the same way as the get-handler code path. Ideally, these two code paths should be equivalent.\n\nHowever, fixing this bug is beyond the scope of the Mutable feature, I feel. It should be the subject of a second patch, as it would be making a much deeper change.\n\nAs long as the existing behavior is erring on the side of caution, denying the IPMI write attempt if the SDR permission can\u0027t be verified to allow external mutability, then I\u0027m OK with accepting this patch as-is.",
      "parentUuid": "7ea156ea_61b3ef18",
      "range": {
        "startLine": 1639,
        "startChar": 4,
        "endLine": 1639,
        "endChar": 76
      },
      "revId": "7a6dbac32f30ca7b566a4bfa8f0311b8e755ad51",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3a47e0f6_c67fe611",
        "filename": "dbus-sdr/sensorcommands.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1639,
      "author": {
        "id": 1000632
      },
      "writtenOn": "2021-08-10T16:23:32Z",
      "side": 1,
      "message": "This code has been running downstream for a while. getting SDR will construct a sensor:write-permission table. IPMI set sensor value command checks the write permission from the table.",
      "parentUuid": "0a225cbb_f7197a28",
      "range": {
        "startLine": 1639,
        "startChar": 4,
        "endLine": 1639,
        "endChar": 76
      },
      "revId": "7a6dbac32f30ca7b566a4bfa8f0311b8e755ad51",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "39477a5c_65c3120b",
        "filename": "dbus-sdr/sensorcommands.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1639,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-08-10T18:02:28Z",
      "side": 1,
      "message": "That is correct. Getting the SDR will construct the write permission table normally. However, the concern was if the user attempts a \"set value\" command without getting the SDR first or performing a \"get value\" command first. In other words, if the user blindly sends a \"set value\" command, bad things will happen. However, this is a topic for another patch, not here.",
      "parentUuid": "3a47e0f6_c67fe611",
      "range": {
        "startLine": 1639,
        "startChar": 4,
        "endLine": 1639,
        "endChar": 76
      },
      "revId": "7a6dbac32f30ca7b566a4bfa8f0311b8e755ad51",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    }
  ]
}
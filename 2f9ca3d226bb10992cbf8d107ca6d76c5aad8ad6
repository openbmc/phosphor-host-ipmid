{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3f50b6cb_c7fd5568",
        "filename": "dbus-sdr/sensorcommands.cpp",
        "patchSetId": 1
      },
      "lineNbr": 290,
      "author": {
        "id": 1000163
      },
      "writtenOn": "2022-01-05T22:17:06Z",
      "side": 1,
      "message": "I am not sure why the second call to getManagedObjects is only called if the first one has an error. Shouldn\u0027t they both be called regardless of the return of the first and then have the maps merged together?",
      "revId": "2f9ca3d226bb10992cbf8d107ca6d76c5aad8ad6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "22b7500c_a6402679",
        "filename": "dbus-sdr/sensorcommands.cpp",
        "patchSetId": 1
      },
      "lineNbr": 290,
      "author": {
        "id": 1000926
      },
      "writtenOn": "2022-01-10T08:57:45Z",
      "side": 1,
      "message": "I just did this out of performance reasons. All of the dbus-sensors apps have `org.freedesktop.DBus.ObjectManager` under the `/` path.\nAnd it looks like the `phosphor-health-monitor` is the only OpenBMC app that has `org.freedesktop.DBus.ObjectManager` under the `/xyz/openbmc_project/sensors` path.\nIf we would always check both of these paths, most of the time second DBus call would be a waste.",
      "parentUuid": "3f50b6cb_c7fd5568",
      "revId": "2f9ca3d226bb10992cbf8d107ca6d76c5aad8ad6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bdf305dd_c8b61414",
        "filename": "dbus-sdr/sensorcommands.cpp",
        "patchSetId": 1
      },
      "lineNbr": 290,
      "author": {
        "id": 1000163
      },
      "writtenOn": "2022-01-27T00:36:33Z",
      "side": 1,
      "message": "I still do not understand the logic here. If the first call to getManagedObjects succeeds, does that include the results from phosphor-health-monitor? If not, then you do need both calls, but not with the second one being in the error path of the first.\n\nI agree that fewer dbus calls is better. Maybe we should change phosphor-health-monitor to behave like all the other sensors.\n\nAlso, I noticed that you are re-declaring ec as a shadow variable here. No need; just reuse the existing one.",
      "parentUuid": "22b7500c_a6402679",
      "revId": "2f9ca3d226bb10992cbf8d107ca6d76c5aad8ad6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4cd1cb69_dc7891f1",
        "filename": "dbus-sdr/sensorcommands.cpp",
        "patchSetId": 1
      },
      "lineNbr": 290,
      "author": {
        "id": 1000926
      },
      "writtenOn": "2022-01-27T15:04:05Z",
      "side": 1,
      "message": "This code will be executed for all the sensor services (`sensorConnection.c_str()` in this case):\n- xyz.openbmc_project.PSUSensor\n- xyz.openbmc_project.HwmonTempSensor\n- xyz.openbmc_project.FanSensor\n- xyz.openbmc_project.ADCSensor\n...\n- xyz.openbmc_project.HealthMon\n\nAnd all of these services have `org.freedesktop.DBus.ObjectManager` interface under the `/xyz/openbmc_project/sensors` path. Except the `xyz.openbmc_project.HealthMon`. Which has it under \u0027/\u0027.\n\n\u003e Maybe we should change phosphor-health-monitor to behave like all the other sensors\n`phosphor-health-monitor` maintainer doesn\u0027t agree with this. You can read discussion under:\nhttps://gerrit.openbmc-project.xyz/c/openbmc/phosphor-health-monitor/+/41228/1/healthMonitor.cpp#530",
      "parentUuid": "bdf305dd_c8b61414",
      "revId": "2f9ca3d226bb10992cbf8d107ca6d76c5aad8ad6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bce8459d_ba252d1c",
        "filename": "dbus-sdr/sensorcommands.cpp",
        "patchSetId": 1
      },
      "lineNbr": 290,
      "author": {
        "id": 1000163
      },
      "writtenOn": "2022-01-27T23:01:36Z",
      "side": 1,
      "message": "Okay. I think I finally have a handle on what this is trying to solve. According to Patrick: 1) most of the sensors have the ObjectManager interface in the wrong path; 2) the IPMI code should not be calling ObjectManager.\n\nI am not sure about problem 2, but problem 1 can be fixed if IPMI sensor code does not assume that the ObjectManager interface is at /. If the IPMI code looks up where the ObjectManager interface is for each sensor endpoint, we can just use that instead of hard-coding / and /xyz/openbmc_project/sensors.",
      "parentUuid": "4cd1cb69_dc7891f1",
      "revId": "2f9ca3d226bb10992cbf8d107ca6d76c5aad8ad6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6e8a175_edb4fd03",
        "filename": "dbus-sdr/sensorcommands.cpp",
        "patchSetId": 1
      },
      "lineNbr": 290,
      "author": {
        "id": 1000926
      },
      "writtenOn": "2022-01-27T23:11:47Z",
      "side": 1,
      "message": "What is the best way to dynamically find out a path of the ObjectManager interface inside a sensor service?",
      "parentUuid": "bce8459d_ba252d1c",
      "revId": "2f9ca3d226bb10992cbf8d107ca6d76c5aad8ad6",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}
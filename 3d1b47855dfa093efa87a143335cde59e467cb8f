{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "034b68e2_146bcafe",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2022-02-24T20:43:09Z",
      "side": 1,
      "message": "Just curious what\u0027s driving this change, would people be surprised if newly created users suddenly have a different privilege if they pick up this change, or is this a fix because this privilege level is what\u0027s expected when creating new users? Maybe some additional info can be added to the commit msg.",
      "revId": "3d1b47855dfa093efa87a143335cde59e467cb8f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b3781085_52360af3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2022-02-25T02:19:30Z",
      "side": 1,
      "message": "Motivation for this is in https://gerrit.openbmc-project.xyz/c/openbmc/bmcweb/+/49295\n\nWe should have some compatibility notes like:\n- This changes IPMI so that newly created IPMI users are created with \"User\" privilege.  Before this such users were created with no privilege.  You should warn BMC administrators about this change.\n- If your system has an upgrade path and users who have no privilege, you should have a plan to handle that.  For example, your upgrade path might delete no access users, or change their access to user privilege.",
      "parentUuid": "034b68e2_146bcafe",
      "revId": "3d1b47855dfa093efa87a143335cde59e467cb8f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6611ea3f_c8129c23",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000219
      },
      "writtenOn": "2022-02-25T18:01:20Z",
      "side": 1,
      "message": "The previously created users are not affected. \nBut the support of `priv-noaccess` should be removed from phosphor-user-manager by the reverting  https://github.com/openbmc/phosphor-user-manager/commit/7c6e7cffaf061aabfe5489ef52442e2f7cbd0fb7 and this may breaks some logic. Thus, Joseph is right, privileges of the such users should be changed.",
      "parentUuid": "b3781085_52360af3",
      "revId": "3d1b47855dfa093efa87a143335cde59e467cb8f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98776190_8aefb09b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1001084
      },
      "writtenOn": "2022-03-02T21:36:38Z",
      "side": 1,
      "message": "Is the plan to remove \u0027No Access\u0027 privilege all together OR just change it to \u0027User level\u0027 at the time of adding users?\n\nIf it is to remove \u0027No Access\u0027 privilege all together then what happens if someone attempts to set using one of the following commands:\nipmitool -I lanplus -C 17 -N 3 -p 623 -U user-P password -H host user priv \u003cuser-id\u003e 0xF\nipmitool -I lanplus -C 17 -N 3 -p 623 -U user -P password -H host channel setaccess \u003cchannel-number\u003e \u003cuser-id\u003e privilege\u003d15\n\nAny impacts?",
      "parentUuid": "6611ea3f_c8129c23",
      "revId": "3d1b47855dfa093efa87a143335cde59e467cb8f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "85df4ec5_d4cda4b4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000219
      },
      "writtenOn": "2022-03-03T09:17:51Z",
      "side": 1,
      "message": "\u003e Is the plan to remove \u0027No Access\u0027 privilege all together OR just change it to \u0027User level\u0027 at the time of adding users?\n\u003e \n\nWe are tending to completely remove `NoAccess`, but it requires a series of changes in `phosphor-user-manager`, `bmcweb` and `phosphor-host-ipmid`. This is one of them.\n\n\u003e If it is to remove \u0027No Access\u0027 privilege all together then what happens if someone attempts to set using one of the following commands:\n\nExactly this commit does not prevent to executing the such commands.\nBut after applying https://gerrit.openbmc-project.xyz/c/openbmc/phosphor-host-ipmid/+/50825/2 the such commands will return:\n\n\u003e ipmitool -I lanplus -C 17 -N 3 -p 623 -U user-P password -H host user priv \u003cuser-id\u003e 0xF\n\nIPMI command failed: Invalid data field in request\nSet Privilege Level command failed (user \u003cuser-id\u003e)\n\n\u003e ipmitool -I lanplus -C 17 -N 3 -p 623 -U user -P password -H host channel setaccess \u003cchannel-number\u003e \u003cuser-id\u003e privilege\u003d15\n\nIPMI command failed: Invalid data field in request\nUnable to Set User Access (channel \u003cchannel-number\u003e id \u003cusser-id\u003e)",
      "parentUuid": "98776190_8aefb09b",
      "revId": "3d1b47855dfa093efa87a143335cde59e467cb8f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "06b1279f_1ca236a6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1001084
      },
      "writtenOn": "2022-03-03T15:20:01Z",
      "side": 1,
      "message": "It probably requires changes in the help text in ipmitool repo for \u0027user\u0027 and \u0027channel\u0027 commands? \nBoth show \u0027No access\u0027 as one of the privilege levels. If we leave it like this in the help text - which makes this privilege looks like supported, then it is a bug when we get \"IPMI command failed: Invalid data field in request\" response.",
      "parentUuid": "85df4ec5_d4cda4b4",
      "revId": "3d1b47855dfa093efa87a143335cde59e467cb8f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "46ef74a6_bd4e04c1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000219
      },
      "writtenOn": "2022-03-03T19:43:40Z",
      "side": 1,
      "message": "I\u0027m not sure that it has sense.\n`ipmitool` is an external tool which version we cannot control at the user side. Moreover,  `NoAccess` removal may break `ipmitool` compatibility with other systems if they support this privilege.",
      "parentUuid": "06b1279f_1ca236a6",
      "revId": "3d1b47855dfa093efa87a143335cde59e467cb8f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77501813_da9f8df2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000192
      },
      "writtenOn": "2022-10-06T22:04:46Z",
      "side": 1,
      "message": "`ipmitool -I lanplus -C 17 -N 3 -p 623 -U user -P password -H host channel setaccess \u003cchannel-number\u003e \u003cuser-id\u003e privilege\u003d15`\n\n\nWhat this command actually does per specification is removes access for the user _from_the_specified_channel_.\n\nThe thing is that we\u0027re trying to combine IPMI with the rest of the interfaces and the more I look at it, the more I get the feeling that there is no nice way to do it.\n\nIPMI has no notion of global user privileges. User\u0027s access level is bound to channels in IPMI. Hence, the user may have access to some channels as Administrator and then be deprived of any access via other channels.\n\nOn the other hand, in OpenBMC we have priv-* groups that define what a user can do function-wise via any interface (Redfish, WebUI, shell, whatever).\n\nThose two approaches are difficult to make friends with each other.\n\nWhat I can think of right now is maybe disable the OpenBMC user (created with `priv-user`) until his privilege is set using the Set User Access command, and treat disabled users as \u0027No access\u0027 in IPMI Get User Access command. That would mimic the original behavior from the IPMI\u0027s point of view, yet allow us to get rid of the otherwise useless `priv-noaccess`. On the other hand, that will interfere with IPMI\u0027s state of enabled/disabled user that can be altered via \u0027Set User Password\u0027 command. We will end up with \u0027disable user\u0027 and \u0027set user access no-access\u0027 meaning the same, at least until we implement the per-channel access level setting.\n\nWhat do you all think?",
      "parentUuid": "46ef74a6_bd4e04c1",
      "revId": "3d1b47855dfa093efa87a143335cde59e467cb8f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "515ad630_348567fd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000235
      },
      "writtenOn": "2022-02-23T16:29:03Z",
      "side": 1,
      "message": "Seems okay to me, but I am not familiar with ipmid.",
      "revId": "3d1b47855dfa093efa87a143335cde59e467cb8f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}
{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "3fc59b10_e534f26a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1001084
      },
      "writtenOn": "2022-03-02T21:14:01Z",
      "side": 1,
      "message": "Looks good\n",
      "revId": "56424e6b18fd759f840045a0ef00ca47fda1b075",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b9cb5696_0e06c162",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000163
      },
      "writtenOn": "2022-03-04T22:01:11Z",
      "side": 1,
      "message": "This is not correct. No Access is used for the set user access command. See Table 22 Set User Access Command in the ipmi 2.0 spec. Byte 3, bits 3:0, a valid value is 0xf for \"NO ACCESS\".",
      "revId": "56424e6b18fd759f840045a0ef00ca47fda1b075",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "197bc4f9_aa3a2ccd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000219
      },
      "writtenOn": "2022-03-05T08:22:00Z",
      "side": 1,
      "message": "Yes, and this `NoAccess` means that the user shall not have access to the specified IPMI channel. But OpenBMC has no per channel privileges and this command interprets specified privilege levels as the global roles.\n`NoAcess` as a global role has no sense and brings a lot of troubles in the permission checks.\n\nThus, our suggestion is the removal of `NoAccess` support from OpenBMC at all to solve all these issues. And this commit is a part of this solution.",
      "parentUuid": "b9cb5696_0e06c162",
      "revId": "56424e6b18fd759f840045a0ef00ca47fda1b075",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c45dfc62_2a204c73",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000219
      },
      "writtenOn": "2022-03-05T08:59:31Z",
      "side": 1,
      "message": "Likely more correct logic is excluding the user from `ipmi` group when a command like `ipmitool ... user priv \u003cuser-id\u003e 0xF` called, but it requires a more complicated refactoring and I\u0027m not ready to do it right now.",
      "parentUuid": "197bc4f9_aa3a2ccd",
      "revId": "56424e6b18fd759f840045a0ef00ca47fda1b075",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c12e626d_4eac79f3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000192
      },
      "writtenOn": "2022-03-05T11:21:24Z",
      "side": 1,
      "message": "As Alexander Filippov said, the Table 22-31 you\u0027re referring to sets the user access on a per-channel basis, quote:\n\n\"This command is used to configure the privilege level and channel accessibility associated with a given user ID.\"\n\nThe NO ACCESS is mentioned in the description of bits [3:0] of request byte 3, which is described as:\n\n\"[3:0] - User Privilege Limit. (Determines the maximum privilege level that the\nuser is allowed to switch to on the specified channel.)\"\n\nThat said, I believe that we indeed do not need to support the NO ACCESS role in OpenBMC because there is no per-channel access concept in OpenBMC.\n\nExistence of the NO ACCESS as a global role only complicates things and adds no benefits. We can safely return a 0xCC code (Invalid data field in request), as it happens with this patch, to indicate that the requested privilege is not supported.",
      "parentUuid": "c45dfc62_2a204c73",
      "revId": "56424e6b18fd759f840045a0ef00ca47fda1b075",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8eb7e5a_9578622f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000163
      },
      "writtenOn": "2022-03-07T23:47:01Z",
      "side": 1,
      "message": "I missed the per-channel part. I see now, that this is kind of weird to attempt to support in our current openbmc setup. However, if openbmc only has one privilege per user, then setting no-priv for any channel will apply to all. While that might not be what the caller expects, it is consistent with setting priv-user or priv-admin in the Set User Access call and having that apply to all channels.\n\nI am not sure why it is so necessary to remove this. It seems easier and just as good to document that openbmc does not support per-channel privileges and that setting no-priv (or any other priv) just sets it for all channels.",
      "parentUuid": "c12e626d_4eac79f3",
      "revId": "56424e6b18fd759f840045a0ef00ca47fda1b075",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e18e3c6_e42c03da",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000219
      },
      "writtenOn": "2022-03-09T08:35:42Z",
      "side": 1,
      "message": "`priv-noaccess` is very uncertain role for other OpenBMC\u0027s software and brings some security issues.\n - How should the user with `priv-noaccess` be handled during the authorization process?\n - Should we decline the such users even when they specify valid login and password?\n - What difference between `priv-noaccess` and disabled account?\n\nIn https://gerrit.openbmc-project.xyz/c/openbmc/bmcweb/+/49295 we supposed that the best solution is the removal priv-noacces from OpenBMC at all. This is a step of that solution.",
      "parentUuid": "d8eb7e5a_9578622f",
      "revId": "56424e6b18fd759f840045a0ef00ca47fda1b075",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6713b5eb_f5136225",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000382
      },
      "writtenOn": "2022-07-15T06:54:43Z",
      "side": 1,
      "message": "Anything moving in this activity of removing no-access user?",
      "revId": "56424e6b18fd759f840045a0ef00ca47fda1b075",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}
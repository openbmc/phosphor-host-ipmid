{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "3fc59b10_e534f26a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1001084
      },
      "writtenOn": "2022-03-02T21:14:01Z",
      "side": 1,
      "message": "Looks good\n",
      "revId": "56424e6b18fd759f840045a0ef00ca47fda1b075",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b9cb5696_0e06c162",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000163
      },
      "writtenOn": "2022-03-04T22:01:11Z",
      "side": 1,
      "message": "This is not correct. No Access is used for the set user access command. See Table 22 Set User Access Command in the ipmi 2.0 spec. Byte 3, bits 3:0, a valid value is 0xf for \"NO ACCESS\".",
      "revId": "56424e6b18fd759f840045a0ef00ca47fda1b075",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "197bc4f9_aa3a2ccd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000219
      },
      "writtenOn": "2022-03-05T08:22:00Z",
      "side": 1,
      "message": "Yes, and this `NoAccess` means that the user shall not have access to the specified IPMI channel. But OpenBMC has no per channel privileges and this command interprets specified privilege levels as the global roles.\n`NoAcess` as a global role has no sense and brings a lot of troubles in the permission checks.\n\nThus, our suggestion is the removal of `NoAccess` support from OpenBMC at all to solve all these issues. And this commit is a part of this solution.",
      "parentUuid": "b9cb5696_0e06c162",
      "revId": "56424e6b18fd759f840045a0ef00ca47fda1b075",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c45dfc62_2a204c73",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000219
      },
      "writtenOn": "2022-03-05T08:59:31Z",
      "side": 1,
      "message": "Likely more correct logic is excluding the user from `ipmi` group when a command like `ipmitool ... user priv \u003cuser-id\u003e 0xF` called, but it requires a more complicated refactoring and I\u0027m not ready to do it right now.",
      "parentUuid": "197bc4f9_aa3a2ccd",
      "revId": "56424e6b18fd759f840045a0ef00ca47fda1b075",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c12e626d_4eac79f3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000192
      },
      "writtenOn": "2022-03-05T11:21:24Z",
      "side": 1,
      "message": "As Alexander Filippov said, the Table 22-31 you\u0027re referring to sets the user access on a per-channel basis, quote:\n\n\"This command is used to configure the privilege level and channel accessibility associated with a given user ID.\"\n\nThe NO ACCESS is mentioned in the description of bits [3:0] of request byte 3, which is described as:\n\n\"[3:0] - User Privilege Limit. (Determines the maximum privilege level that the\nuser is allowed to switch to on the specified channel.)\"\n\nThat said, I believe that we indeed do not need to support the NO ACCESS role in OpenBMC because there is no per-channel access concept in OpenBMC.\n\nExistence of the NO ACCESS as a global role only complicates things and adds no benefits. We can safely return a 0xCC code (Invalid data field in request), as it happens with this patch, to indicate that the requested privilege is not supported.",
      "parentUuid": "c45dfc62_2a204c73",
      "revId": "56424e6b18fd759f840045a0ef00ca47fda1b075",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}